'use strict'
;(function () {
  // npx esbuild shared\utils\pluginConfig2ComfyNodeDefs.ts --minify
  function pluginConfig2ComfyNodeDefs(p,d=!0){const a={};if(!p||!p.functions)return a;p.functions.forEach(n=>{const u={name:`plugin.${p.plugin_name}.${n.function_name}`,category:`plugins/${p.plugin_name}`,display_name:n.display_name||n.function_name,description:n.description||p.description,python_module:`custom_nodes.${p.plugin_name}.${n.function_name}`,input:{required:{},optional:{}},input_order:{required:[],optional:[]},output:[],output_name:[],output_is_list:[],output_node:!1},o=u.input,i=u.input_order;n.input?.source&&n.input.source.forEach(e=>{const s=e.optional!==!0;let t=typeof e.options=="object"&&Object.keys(e.options).length>0?e.options:null;["BOOLEAN","INT","FLOAT","STRING"].includes(`${e.type}`.toUpperCase())&&(t={...t||{},forceInput:!0}),s?(o.required[e.name]=t?[e.type,t]:[e.type],i.required.push(e.name)):(o.optional[e.name]=t?[e.type,t]:[e.type],i.optional.push(e.name))}),n.input?.args&&n.input.args.forEach(e=>{const s=e.optional===!1;let t=typeof e.options=="object"&&Object.keys(e.options).length>0?e.options:null;if(s||(t={...t||{},isOptional:!0}),e.type==="COMBO"&&t?.values){const{values:_,...f}=t;o.optional[e.name]=[_,f],i.optional.push(e.name)}else s?(o.required[e.name]=t?[e.type,t]:[e.type],i.required.push(e.name)):(o.optional[e.name]=t?[e.type,t]:[e.type],i.optional.push(e.name))}),Object.keys(o.required).length===0&&delete o.required,Object.keys(o.optional).length===0&&delete o.optional,i.required.length===0&&delete i.required,i.optional.length===0&&delete i.optional;const y=u.output,r=u.output_name,m=u.output_is_list;n.output&&n.output.forEach(e=>{y.push(e.type),r.push(e.name),m.push(!1)}),a[u.name]=u});const l=JSON.stringify(a,null,2);return d&&console.log(l),JSON.parse(l)}
  window.$pluginConfig2ComfyNodeDefs = pluginConfig2ComfyNodeDefs
})()
