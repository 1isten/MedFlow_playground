'use strict'
;(function () {
  // npx esbuild shared\utils\pluginConfig2ComfyNodeDefs.ts --minify
  function pluginConfig2ComfyNodeDefs(a,h=!0){const d={};if(!a||!a.functions)return d;a.functions.forEach(o=>{const i={name:`plugin.${a.plugin_name}.${o.function_name}`,category:`plugins/${a.plugin_name}`,display_name:o.display_name||o.function_name,description:"",python_module:`custom_nodes.${a.plugin_name}.${o.function_name}`,input:{required:{},optional:{}},input_order:{required:[],optional:[]},output:[],output_name:[],output_is_list:[],output_node:!1},q=o.description||a.description||"",f=o.version||a.version||"";f&&(i.display_name+=`@v${f}`),i.description=q;const p=i.input,s=i.input_order,r=o.inputs||o.input||{},m=r.sources||r.source||[],_=r.args||[];m.length>0&&m.forEach(e=>{const n=Array.isArray(e.type)&&e.type[0]?e.type[0]:e.type,l=e.optional!==!0,u=e.default;let t=typeof e.options=="object"&&e.options&&Object.keys(e.options).length>0?e.options:u?{default:u}:null;u&&t&&t.default===void 0&&(t.default=u),["BOOLEAN","INT","FLOAT","STRING"].includes(`${n}`.toUpperCase())&&(t={...t||{},forceInput:!0}),l?(p.required[e.name]=t?[n,t]:[n],s.required.push(e.name)):(p.optional[e.name]=t?[n,t]:[n],s.optional.push(e.name))}),_.length>0&&_.forEach(e=>{const n=Array.isArray(e.type)&&e.type[0]?e.type[0]:e.type,l=e.optional===!1,u=e.default;let t=typeof e.options=="object"&&e.options&&Object.keys(e.options).length>0?e.options:u?{default:u}:null;if(u&&t&&t.default===void 0&&(t.default=u),l||(t={...t||{},isOptional:!0}),n==="COMBO"&&t?.values){const{values:j,...v}=t;p.optional[e.name]=[j,v],s.optional.push(e.name)}else l?(p.required[e.name]=t?[n,t]:[n],s.required.push(e.name)):(p.optional[e.name]=t?[n,t]:[n],s.optional.push(e.name))}),Object.keys(p.required).length===0&&delete p.required,Object.keys(p.optional).length===0&&delete p.optional,s.required.length===0&&delete s.required,s.optional.length===0&&delete s.optional;const O=i.output,$=i.output_name,b=i.output_is_list,c=o.outputs||o.output||[];c.length>0&&c.forEach(e=>{O.push(e.type),$.push(e.name),b.push(!1)}),d[i.name]=i});const y=JSON.stringify(d,null,2);return h&&console.log(y),JSON.parse(y)}
  window.$pluginConfig2ComfyNodeDefs = pluginConfig2ComfyNodeDefs
})()
