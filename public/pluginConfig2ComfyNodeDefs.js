'use strict'
;(function () {
  // npx esbuild shared\utils\pluginConfig2ComfyNodeDefs.ts --minify
  function pluginConfig2ComfyNodeDefs(a,A=!0){const r={};if(!a||!a.functions)return r;a.functions.forEach(o=>{const s={name:`plugin.${a.plugin_name}.${o.function_name}`,category:`plugins/${a.plugin_name}`,display_name:o.display_name||o.function_name,description:"",python_module:`custom_nodes.${a.plugin_name}.${o.function_name}`,input:{required:{},optional:{}},input_order:{required:[],optional:[]},output:[],output_name:[],output_is_list:[],output_node:!1},O=o.description||a.description||"",h=o.version||a.version||"";h&&(s.display_name+=`@v${h}`),s.description=O;const i=s.input,p=s.input_order,y=o.inputs||o.input||{},_=y.sources||y.source||[],c=y.args||[];_.length>0&&_.forEach(e=>{let n=Array.isArray(e.type)?e.type.length>1?"ANY":e.type[0]||"UNKNOWN":e.type;n?.toUpperCase()==="ANY"&&(n="*");const l=e.optional!==!0,u=e.default;let t=typeof e.options=="object"&&e.options&&Object.keys(e.options).length>0?e.options:u?{default:u}:null;u&&t&&t.default===void 0&&(t.default=u),e.description,n==="*"&&Array.isArray(e.type)&&e.type.length>1?t={...t||{},acceptTypes:e.type}:["BOOLEAN","INT","FLOAT","STRING"].includes(`${n}`.toUpperCase())&&(t={...t||{},forceInput:!0}),l?(i.required[e.name]=t?[n,t]:[n],p.required.push(e.name)):(i.optional[e.name]=t?[n,t]:[n],p.optional.push(e.name))}),c.length>0&&c.forEach(e=>{let n=Array.isArray(e.type)?e.type.length>1?"ANY":e.type[0]||"UNKNOWN":e.type;n?.toUpperCase()==="ANY"&&(n="*");const l=e.optional===!1,u=e.default;let t=typeof e.options=="object"&&e.options&&Object.keys(e.options).length>0?e.options:u?{default:u}:null;if(u&&t&&t.default===void 0&&(t.default=u),e.description,l||(t={...t||{},isOptional:!0}),n==="COMBO"&&t?.values&&Array.isArray(t.values)){const{values:d,...f}=t;i.optional[e.name]=[d,f],p.optional.push(e.name)}else if(n==="STRING"&&t?.enum&&Array.isArray(t.enum)){const{enum:d,...f}=t;i.optional[e.name]=[d,f],p.optional.push(e.name)}else l?(i.required[e.name]=t?[n,t]:[n],p.required.push(e.name)):(i.optional[e.name]=t?[n,t]:[n],p.optional.push(e.name))}),Object.keys(i.required).length===0&&delete i.required,Object.keys(i.optional).length===0&&delete i.optional,p.required.length===0&&delete p.required,p.optional.length===0&&delete p.optional;const q=s.output,v=s.output_name,C=s.output_is_list,N=o.outputs||o.output||[];N.length>0&&N.forEach(e=>{let n=Array.isArray(e.type)?e.type.length>1?"ANY":e.type[0]||"UNKNOWN":e.type;n?.toUpperCase()==="ANY"&&(n="*"),q.push(n),v.push(e.name),C.push(!1),e.description}),r[s.name]=s});const m=JSON.stringify(r,null,2);return A&&console.log(m),JSON.parse(m)}
  window.$pluginConfig2ComfyNodeDefs = pluginConfig2ComfyNodeDefs
})()
