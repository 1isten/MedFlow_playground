'use strict'
;(function () {
  // npx esbuild shared\utils\pluginConfig2ComfyNodeDefs.ts --minify
  function pluginConfig2ComfyNodeDefs(a,h=!0){const d={};if(!a||!a.functions)return d;a.functions.forEach(o=>{const i={name:`plugin.${a.plugin_name}.${o.function_name}`,category:`plugins/${a.plugin_name}`,display_name:o.display_name||o.function_name,description:o.description||a.description||"",python_module:`custom_nodes.${a.plugin_name}.${o.function_name}`,input:{required:{},optional:{}},input_order:{required:[],optional:[]},output:[],output_name:[],output_is_list:[],output_node:!1},f=o.version||a.version||"";f&&(i.description=`v${f}\r\n`+(i.description||""));const u=i.input,p=i.input_order,r=o.inputs||o.input||{},m=r.sources||r.source||[],_=r.args||[];m.length>0&&m.forEach(e=>{const n=Array.isArray(e.type)&&e.type[0]?e.type[0]:e.type,l=e.optional!==!0,s=e.default;let t=typeof e.options=="object"&&Object.keys(e.options).length>0?e.options:s?{default:s}:null;s&&t&&t.default===void 0&&(t.default=s),["BOOLEAN","INT","FLOAT","STRING"].includes(`${n}`.toUpperCase())&&(t={...t||{},forceInput:!0}),l?(u.required[e.name]=t?[n,t]:[n],p.required.push(e.name)):(u.optional[e.name]=t?[n,t]:[n],p.optional.push(e.name))}),_.length>0&&_.forEach(e=>{const n=Array.isArray(e.type)&&e.type[0]?e.type[0]:e.type,l=e.optional===!1,s=e.default;let t=typeof e.options=="object"&&Object.keys(e.options).length>0?e.options:s?{default:s}:null;if(s&&t&&t.default===void 0&&(t.default=s),l||(t={...t||{},isOptional:!0}),n==="COMBO"&&t?.values){const{values:b,...j}=t;u.optional[e.name]=[b,j],p.optional.push(e.name)}else l?(u.required[e.name]=t?[n,t]:[n],p.required.push(e.name)):(u.optional[e.name]=t?[n,t]:[n],p.optional.push(e.name))}),Object.keys(u.required).length===0&&delete u.required,Object.keys(u.optional).length===0&&delete u.optional,p.required.length===0&&delete p.required,p.optional.length===0&&delete p.optional;const q=i.output,O=i.output_name,$=i.output_is_list,c=o.outputs||o.output||[];c.length>0&&c.forEach(e=>{q.push(e.type),O.push(e.name),$.push(!1)}),d[i.name]=i});const y=JSON.stringify(d,null,2);return h&&console.log(y),JSON.parse(y)}
  window.$pluginConfig2ComfyNodeDefs = pluginConfig2ComfyNodeDefs
})()
