'use strict'
;(function () {
  // npx esbuild shared\utils\pluginConfig2ComfyNodeDefs.ts --minify
  function pluginConfig2ComfyNodeDefs(u,h=!0){const l={};if(!u||!u.functions)return l;u.functions.forEach(o=>{const i={name:`plugin.${u.plugin_name}.${o.function_name}`,category:`plugins/${u.plugin_name}`,display_name:o.display_name||o.function_name,description:o.description||u.description||"",python_module:`custom_nodes.${u.plugin_name}.${o.function_name}`,input:{required:{},optional:{}},input_order:{required:[],optional:[]},output:[],output_name:[],output_is_list:[],output_node:!1},d=o.version||u.version||"";d&&(i.description=`v${d}\r\n`+(i.description||""));const p=i.input,s=i.input_order,r=o.inputs||o.input||{},m=r.sources||r.source||[],f=r.args||[];m.length>0&&m.forEach(e=>{const n=Array.isArray(e.type)&&e.type[0]?e.type[0]:e.type,a=e.optional!==!0;let t=typeof e.options=="object"&&Object.keys(e.options).length>0?e.options:null;["BOOLEAN","INT","FLOAT","STRING"].includes(`${n}`.toUpperCase())&&(t={...t||{},forceInput:!0}),a?(p.required[e.name]=t?[n,t]:[n],s.required.push(e.name)):(p.optional[e.name]=t?[n,t]:[n],s.optional.push(e.name))}),f.length>0&&f.forEach(e=>{const n=Array.isArray(e.type)&&e.type[0]?e.type[0]:e.type,a=e.optional===!1;let t=typeof e.options=="object"&&Object.keys(e.options).length>0?e.options:null;if(a||(t={...t||{},isOptional:!0}),n==="COMBO"&&t?.values){const{values:$,...b}=t;p.optional[e.name]=[$,b],s.optional.push(e.name)}else a?(p.required[e.name]=t?[n,t]:[n],s.required.push(e.name)):(p.optional[e.name]=t?[n,t]:[n],s.optional.push(e.name))}),Object.keys(p.required).length===0&&delete p.required,Object.keys(p.optional).length===0&&delete p.optional,s.required.length===0&&delete s.required,s.optional.length===0&&delete s.optional;const c=i.output,q=i.output_name,O=i.output_is_list,_=o.outputs||o.output||[];_.length>0&&_.forEach(e=>{c.push(e.type),q.push(e.name),O.push(!1)}),l[i.name]=i});const y=JSON.stringify(l,null,2);return h&&console.log(y),JSON.parse(y)}
  window.$pluginConfig2ComfyNodeDefs = pluginConfig2ComfyNodeDefs
})()
